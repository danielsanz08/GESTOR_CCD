{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block titulo %}GESTOR CCD{% endblock %}</title>
  <link rel="icon" type="image/x-icon" href="{% static 'imagen/LOGO.png' %}">
  <link href="{% static 'css/navbar.css' %}?v={% now 'U' %}" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      padding-top: 100px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
      background-color: white;
      margin: auto;
      padding: 20px;
      border-radius: 10px;
      width: 400px;
      max-width: 90%;
      text-align: center;
      position: relative;
    }

    .close {
      color: #aaa;
      font-size: 28px;
      position: absolute;
      top: 5px;
      right: 15px;
      cursor: pointer;
    }

    .btn-confirmar {
      background-color: red;
      color: white;
      padding: 10px 15px;
      border: none;
      margin-right: 10px;
      cursor: pointer;
      border-radius: 5px;
    }

    .btn-cancelar {
      background-color: gray;
      color: white;
      padding: 10px 15px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
  </style>

  <!-- Bootstrap Bundle con Popper.js -->


</head>
<style>
  .custom-alert {
    position: absolute;
    top: 20vh;
    left: 50%;
    transform: translateX(-50%);
    width: 40vh;
    background-color: rgb(248, 204, 123);
    border: solid 1px rgba(255, 0, 0, 0.473);
    color: rgb(238, 106, 30);
    font-weight: bold;
    padding: 15px 30px;
    border-radius: 5px;
    text-align: center;
    z-index: 9999;
    backdrop-filter: blur(5px);
    animation: fadeIn 0.5s ease-out forwards, fadeOut 0.5s ease-in 4.5s forwards;
  }

  /* Animaci√≥n de entrada */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translate(-50%, -10px);
    }

    to {
      opacity: 1;
      transform: translate(-50%, 0);
    }
  }

  /* Animaci√≥n de salida */
  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: translate(-50%, 0);
    }

    to {
      opacity: 0;
      transform: translate(-50%, -10px);
    }
  }


  .navbar {
    display: flex;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: #1c96bb;
    color: white;
    padding: 15px;
    text-align: center;
    font-weight: bold;
    z-index: 1000;
    height: 65px;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  /* Estilos para el contenedor de los breadcrumbs */
  /* Contenedor de los breadcrumbs */
  .breadcrumbs-container {
    background-color: rgba(0, 0, 255, 0);
    /* Transparente */
    color: #000;
    position: absolute;
    top: 16vh;
    left: 0;
    /* PEGADO AL BORDE IZQUIERDO */
    right: auto;
    border-radius: var(--border-radius);
    padding: 10px 20px;
    z-index: 999;
    width: fit-content;
    text-align: left;
    display: flex;
    justify-content: flex-start;
    margin-left: 0;
    /* SIN ESPACIO */
  }

  /* Lista de breadcrumb */
  .breadcrumb {
    list-style: none;
    padding-left: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    text-align: center;
  }

  /* Cada √≠tem */
  .breadcrumb-item {
    display: inline;
  }

  /* Enlaces */
  .breadcrumb-item a {
    color: #000;
    text-decoration: none;
    font-weight: bold;
    background-color: #1c96bb62;
    padding: 5px 10px;
    border-radius: 20px;
    display: inline-block;
    transition: background-color 0.3s ease;
  }

  /* Hover */
  .breadcrumb-item a:hover {
    background-color: #1c96bb;
    color: white;
  }

  /* √çtem activo */
  .breadcrumb-item.active {
    color: #ffffff;
    background-color: #1c96bb;
    padding: 5px 10px;
    border-radius: 20px;
    font-weight: bold;
  }

  /*RESPONSIVO*/
  /* üì± Tel√©fono peque√±o (ej. 360x640) */
  @media (min-width: 360px) and (max-width: 374px) {
    .navbar {
      text-align: center;
    }

    .navbar h2 {
      position: absolute;
      left: 15vh;
    }

    /* Fondo */
    .fondo img {
      opacity: 0.2;
      position: fixed;
      top: 25vh;
      left: 0;
      width: 100%;
      height: 40%;
      z-index: -1;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 60px;
      width: 80px;
    }
  }

  /* üì± Tel√©fono mediano (ej. 375x667 - 414x896) */
  @media (min-width: 375px) and (max-width: 429px) {
    .navbar {
      text-align: center;
    }

    .navbar h2 {
      position: absolute;
      left: 15vh;
    }

    /* Fondo */
    .fondo img {
      opacity: 0.2;
      position: fixed;
      top: 25vh;
      left: 0;
      width: 100%;
      height: 40%;
      z-index: -1;
    }

    footer {
      font-size: medium;
      background: #1c96bb;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 100px;
      width: 100px;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 8vh;
    }
  }

  /* üì± Tel√©fono grande (ej. 430x932 - 480x960) */
  @media (min-width: 430px) and (max-width: 539px) {
    .navbar {
      text-align: center;
    }

    .navbar h2 {
      position: absolute;
      left: 15vh;
    }

    /* Fondo */
    .fondo img {
      opacity: 0.2;
      position: fixed;
      top: 25vh;
      left: 0;
      width: 100%;
      height: 40%;
      z-index: -1;
    }

    footer {
      font-size: medium;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 100px;
      width: 100px;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 8vh;
    }
  }

  /* üìü Phablet (600x960) */
  @media (min-width: 540px) and (max-width: 679px) {
    .navbar {
      text-align: center;
    }

    .navbar h2 {
      position: absolute;
      left: 25vh;
    }

    /* Fondo */
    .fondo img {
      opacity: 0.2;
      position: fixed;
      top: 25vh;
      left: 0;
      width: 100%;
      height: 40%;
      z-index: -1;
    }

    footer {
      font-size: medium;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 100px;
      width: 100px;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 8vh;
    }
  }

  /* üì± Tablet peque√±a (ej. iPad Mini vertical 768x1024) */
  @media (min-width: 680px) and (max-width: 799px) {
    .navbar {
      text-align: center;
    }

    .navbar h2 {
      position: absolute;
      left: 35vh;
    }

    /* Fondo */
    .fondo img {
      opacity: 0.2;
      position: fixed;
      top: 25vh;
      left: 0;
      width: 100%;
      height: 40%;
      z-index: -1;
    }

    footer {
      font-size: large;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 100px;
      width: 100px;

    }

    #accessibility-menu {
      position: absolute;
      top: 20vh;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 8vh;
    }
  }

  /* üíª Laptop 11" (1024x600) */
  @media (min-width: 992px) and (max-width: 1099px) {
    footer {
      height: 3vh;
      font-size: medium;

    }

    #toggle-accessibility-menu {
      height: 80px;
      width: 100px;
      position: absolute;
      top: 80vh;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 8vh;
    }

    #accessibility-menu {
      height: 60vh;
    }
  }

  /* üíª Laptop 12" (1152x720) */
  @media (min-width: 1100px) and (max-width: 1199px) {
    footer {
      height: 3vh;
      font-size: medium;
    }

    #toggle-accessibility-menu {
      height: 100px;
      width: 100px;

    }

    #accessibility-menu {
      position: absolute;
      top: 11vh;
      height: 60vh;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 8vh;
    }
  }

  /* üíª Laptop 13-14" (1366x768) */
  @media (min-width: 1300px) and (max-width: 1439px) {
    footer {
      height: 5vh;
      font-size: medium;

    }

    #toggle-accessibility-menu {


      height: 90px;
      width: 90px;
    }
  }

  /* üíª Laptop 15-16" (1440x900) */
  @media (min-width: 1440px) and (max-width: 1599px) {
    footer {

      height: 4vh;
      font-size: large;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 100px;
      width: 120px;
    }

    #accessibility-menu {
      position: absolute;
      top: 17vh;
      height: 60vh;
    }

    #accessibility-menu {
      position: absolute;
      top: 14vh;
      height: 60vh;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 9vh;
    }
  }

  /* üéØ Ajuste m√°s fino para monitor de 19" (1600x900) */
  @media (min-width: 1600px) and (max-width: 1600px) and (min-height: 900px) and (max-height: 900px) {
    footer {
      height: 4vh;
      font-size: large;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 100px;
      width: 110px;
    }

  }

  /* üñ•Ô∏è Monitor 22-24" (1920x1080) */
  @media (min-width: 1920px) and (max-width: 2559px) {
    footer {
      height: 5vh;
      font-size: large;
    }

    #toggle-accessibility-menu {
      background-color: #1c96bb;
      height: 130px;
      width: 150px;
      position: absolute;
      top: 80vh;
    }

    #toggle-accessibility-menu i {
      font-size: xx-large;
      /* m√°s grande que large */
    }

    #accessibility-menu {
      position: absolute;
      top: 17vh;
      height: 61vh;
      width: 40vh;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 9vh;
    }

  }

  /* üñ•Ô∏è Monitor 27-32" (2560x1440 y m√°s) */
  @media (min-width: 2560px) {
    .navbar {
      height: 9vh;
    }

    footer {
      height: 4vh;
      font-size: large;
    }

    #toggle-accessibility-menu {
      background-color: #bb1c1c;
      height: 130px;
      width: 150px;
      position: absolute;
      top: 80vh;
    }

    #toggle-accessibility-menu i {
      font-size: xx-large;
      /* m√°s grande que large */
    }

    #accessibility-menu {
      width: 40vh;
      position: absolute;
      top: 20vh;
      height: 55vh;
    }

    #accessibility-menu {
      position: absolute;
      top: 15vh;
      height: 62.5vh;
      width: 45vh;
    }

    #zoom-controls,
    .dark-mode,
    .monocromo,
    .titulos,
    .enlaces {
      height: 9.5vh;

    }

  }

  /* Estilos de la secci√≥n de nombre de usuario */
  .header-icons {
    position: absolute;
    left: 10vh;
  }

  .header-icons .name {
    font-size: 19px;
  }

  .header-icons .icono {
    width: 20px !important;
    height: 20px !important;
    stroke-width: 1.5;
    vertical-align: middle;
    font-weight: bold;
  }

  a {
    text-decoration: none;
  }
</style>
{% if messages %}
{% for message in messages %}
<div class="custom-alert alert-{{ message.tags }}">
  {{ message }}
</div>
{% endfor %}
{% endif %}

<div class="fondo">
  <img src="{% static 'imagen/LOGO.png' %}" alt="Logo CCD">
</div>

<body>
  <div class="navbar">
    <h2>GESTOR CCD</h2>
    <div class="header-icons" title="Usuario">
      {% if user.is_authenticated %}
      <span class="name">
        <i data-feather="users" class="icono"></i> {{ user.username }}
      </span>
      {% else %}
      <span>

      </span>
      {% endif %}
    </div>

  </div>
  
{% if request.user.is_authenticated and request.user.role == 'Administrador' and request.user.module == 'Papeleria' and bajo_stock and mostrar_alerta_stock %}
  <div id="stock-alert" class="alert-overlay">
    <div class="alert-box">
      <p style="font-weight: bold; color: #000;">
        ‚ö†Ô∏è ¬°Atenci√≥n! Hay art√≠culos con stock menor a 10 unidades.
      </p>
      <button onclick="cerrarAlerta()">Aceptar</button>
      <a href="{% url 'papeleria:lista_bajo_stock' %}">
        <button>Ver</button>
      </a>
    </div>
  </div>
{% endif %}


  <style>
    .alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .alert-box {
      background: white;
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

    .alert-box button {
      margin-top: 15px;
      padding: 8px 15px;
      border: none;
      background-color: #007bff;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    .alert-box button:hover {
      background-color: #0056b3;
    }
  </style>

  <script>
    function cerrarAlerta() {
      document.getElementById("stock-alert").style.display = "none";
    }
  </script>
  

  <div class="container">
    {% block contenido %}
    {% endblock %}
  </div>
  {% if user.is_authenticated and breadcrumbs %}
  <div class="breadcrumbs-container" title="Breadcrumb">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        {% if breadcrumb.url %}
        <li class="breadcrumb-item"><a href="{{ breadcrumb.url }}">{{ breadcrumb.name }}</a></li>
        {% else %}
        <li class="breadcrumb-item active" aria-current="page">{{ breadcrumb.name }}</li>
        {% endif %}
        {% endfor %}
      </ol>
    </nav>
  </div>
  {% endif %}



  <footer>
    <p>¬© {% now "Y" %} GESTOR CCD</p>
  </footer>

  <button id="toggle-accessibility-menu" title="Bot√≥n de accesibilidad">
    <i class="bi bi-list fs-1" id="simbolo"></i>
  </button>

  <div id="accessibility-menu" class="hidden">
    <div id="zoom-controls" class="menu-option">
      <button class="zoom-button" id="zoom-in" title="Aumentar zoom">+</button>
      <button class="zoom-button" id="zoom-out" title="Disminuir zoom">-</button>
      <button class="zoom-reset" id="zoom-reset" title="Restablecer zoom">‚ü≥</button>
      <span id="zoom-percentage">100%</span>
    </div>

    <div class="op">
      <button class="dark-mode">üåô||üåû Modo Oscuro</button>
      <button class="monocromo">üîòModo Monocromo</button>
      <button class="titulos">Resaltar titulos</button>
      <button class="enlaces">Resaltar enlaces</button>
      <div id="zoom-controls" class="menu-option">
        <button class="zoom-button" id="zoom-in" title="Aumentar zoom">+</button>
        <button class="zoom-button" id="zoom-out" title="Disminuir zoom">-</button>
        <button class="zoom-reset" id="zoom-reset" title="Restablecer zoom">‚ü≥</button>
        <span id="zoom-percentage">100%</span>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const toggleButton = document.getElementById("toggle-accessibility-menu");
      const menu = document.getElementById("accessibility-menu");

      toggleButton.addEventListener("click", function () {
        menu.classList.toggle("visible"); // Agrega o quita la clase visible
      });
    });
  </script>


  <script src="https://unpkg.com/feather-icons"></script>
  <script>
    feather.replace();
  </script>


</body>

</html>